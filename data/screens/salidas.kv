TrazabilidadScreen:
    name: 'Salidas'
    popup: popup.__self__
	        
	FloatLayout:
		padding: 20
    	spacing: 10
		
		ScrollView:
			size_hint: .8, 1
			pos_hint: {'x': .0, 'y': .0}
		
			DataGrid:
				id: grid
		    	rows: 10
                	
		BoxLayout:
			orientation: 'horizontal'
			id: tr
			
			Button:
				size_hint: .2, .1
				pos_hint: {'x':.8, 'y':.8}
				text: 'Añadir Registro'
				on_release: root.popup.open()
				
		    Popup:
		        id: popup
		        size_hint: (1, 1)
		        auto_dismiss: False
		        on_parent: if self.parent == tr: tr.remove_widget(self)
		        title: "Añadir movimiento de salida"
		        content: popupcontent
		        
		        BoxLayout:
		            id: popupcontent
		            orientation: 'horizontal'
		            
		        	GridLayout:
		        		cols: 2
		        		
		        		Label:
		        			text: 'producto'
		        			id: lbl_producto
		        			
		        		TextInput:
		        			id: txt_producto
		        			
		        		Label:
		        			text: 'cantidad'
		        			id: lbl_cantidad
		        			
		        		TextInput:
		        			id: txt_cantidad
		        			
		        		Label:
		        			text: 'codigo'
		        			id: lbl_codigo
		        			
		        		TextInput:
		        			id: txt_codigo
		            
		            	Button:
				            text: "Insertar"
				            on_press: grid.insert(txt_producto.text, txt_cantidad.text, txt_codigo.text, ty="out")
				            on_release: popup.dismiss()
				            
				        Button:
				            text: "Salir"
				            on_release: popup.dismiss()		            
		            
		            
			Button:
				size_hint: .2, .1
				pos_hint: {'x':.8, 'y':.6}
				text: 'Borrar Registro'
				on_press: grid.remove_row()
				
			Button:
				size_hint: .2, .1
				pos_hint: {'x':.8, 'y':.4}
				text: 'Exportar al Servidor'
				on_press: grid.export_out()